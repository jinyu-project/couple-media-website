# å¿«é€Ÿå‘½ä»¤å‚è€ƒ

## âš¡ ä½¿ç”¨å‘½ä»¤åˆ«åï¼ˆæ¨èï¼‰

**åŠ è½½å‘½ä»¤åˆ«åï¼š**
```powershell
. .\powershell-aliases.ps1
```

**ç„¶åå°±å¯ä»¥ä½¿ç”¨ç®€çŸ­å‘½ä»¤ï¼š**
```powershell
Setup-SSHKey      # é…ç½® SSH å¯†é’¥å…å¯†ç™»å½•
Sync-Uploads      # ä»…åŒæ­¥ç”¨æˆ·ä¸Šä¼ çš„å†…å®¹
Sync-All          # åŒæ­¥æ‰€æœ‰æ•°æ®
Upload-Data       # ä¸Šä¼ æ•°æ®åˆ°æœåŠ¡å™¨
Connect-Server    # SSH è¿æ¥åˆ°æœåŠ¡å™¨
Show-DeployHelp   # æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯
```

**æˆ–è€…æ·»åŠ åˆ° PowerShell é…ç½®æ–‡ä»¶ï¼ˆæ°¸ä¹…ç”Ÿæ•ˆï¼‰ï¼š**
```powershell
# æŸ¥çœ‹é…ç½®æ–‡ä»¶è·¯å¾„
$PROFILE

# ç¼–è¾‘é…ç½®æ–‡ä»¶
notepad $PROFILE

# åœ¨æ–‡ä»¶æœ«å°¾æ·»åŠ ï¼š
. C:\Users\ä½ çš„ç”¨æˆ·å\Desktop\couple-media-website\powershell-aliases.ps1
```

---

## ğŸ“‹ åŸå§‹å‘½ä»¤å‚è€ƒ

## ğŸ”‘ é…ç½® SSH å¯†é’¥å…å¯†ç™»å½•

```powershell
# ç”Ÿæˆ SSH å¯†é’¥ï¼ˆå¦‚æœæ²¡æœ‰ï¼‰
ssh-keygen -t rsa -b 4096 -f "$env:USERPROFILE\.ssh\id_rsa"

# å¤åˆ¶å…¬é’¥åˆ°æœåŠ¡å™¨ï¼ˆéœ€è¦è¾“å…¥ä¸€æ¬¡å¯†ç ï¼‰
type $env:USERPROFILE\.ssh\id_rsa.pub | ssh admin@39.97.243.8 "mkdir -p ~/.ssh && cat >> ~/.ssh/authorized_keys"

# æµ‹è¯•å…å¯†ç™»å½•
ssh admin@39.97.243.8 "echo 'è¿æ¥æˆåŠŸï¼'"
```

---

## ğŸ“¤ ä¸Šä¼ æ•°æ®åˆ°æœåŠ¡å™¨

```powershell
$SERVER_IP = "39.97.243.8"
$SERVER_USER = "admin"
$SERVER_PATH = "/home/admin/couple-media-website/server"

# ä¸Šä¼ æ•°æ®æ–‡ä»¶ï¼ˆJSONï¼‰
scp server/data/*.json ${SERVER_USER}@${SERVER_IP}:${SERVER_PATH}/data/

# ä¸Šä¼ ç…§ç‰‡æ–‡ä»¶
scp -r server/uploads/photos ${SERVER_USER}@${SERVER_IP}:${SERVER_PATH}/uploads/

# ä¸Šä¼ è§†é¢‘æ–‡ä»¶
scp -r server/uploads/videos ${SERVER_USER}@${SERVER_IP}:${SERVER_PATH}/uploads/

# ä¸Šä¼ å°è¯´å°é¢ï¼ˆå¦‚æœæœ‰ï¼‰
scp -r server/uploads/novel-covers ${SERVER_USER}@${SERVER_IP}:${SERVER_PATH}/uploads/
```

---

## ğŸ“¥ ä»æœåŠ¡å™¨åŒæ­¥æ•°æ®åˆ°æœ¬åœ°

### ä»…åŒæ­¥ä¸Šä¼ çš„å†…å®¹ï¼ˆæ¨èï¼‰

```powershell
$SERVER_IP = "39.97.243.8"
$SERVER_USER = "admin"
$SERVER_PATH = "/home/admin/couple-media-website/server"

# ä¸‹è½½ç…§ç‰‡æ–‡ä»¶
scp -r ${SERVER_USER}@${SERVER_IP}:${SERVER_PATH}/uploads/photos server/uploads/

# ä¸‹è½½è§†é¢‘æ–‡ä»¶
scp -r ${SERVER_USER}@${SERVER_IP}:${SERVER_PATH}/uploads/videos server/uploads/

# ä¸‹è½½å°è¯´å°é¢ï¼ˆå¦‚æœå­˜åœ¨ï¼‰
scp -r ${SERVER_USER}@${SERVER_IP}:${SERVER_PATH}/uploads/novel-covers server/uploads/ 2>$null
```

### åŒæ­¥æ‰€æœ‰æ•°æ®ï¼ˆåŒ…æ‹¬æ•°æ®æ–‡ä»¶ï¼‰

```powershell
$SERVER_IP = "39.97.243.8"
$SERVER_USER = "admin"
$SERVER_PATH = "/home/admin/couple-media-website/server"

# ä¸‹è½½æ•°æ®æ–‡ä»¶ï¼ˆJSONï¼‰
scp ${SERVER_USER}@${SERVER_IP}:${SERVER_PATH}/data/*.json server/data/

# ä¸‹è½½ç…§ç‰‡æ–‡ä»¶
scp -r ${SERVER_USER}@${SERVER_IP}:${SERVER_PATH}/uploads/photos server/uploads/

# ä¸‹è½½è§†é¢‘æ–‡ä»¶
scp -r ${SERVER_USER}@${SERVER_IP}:${SERVER_PATH}/uploads/videos server/uploads/

# ä¸‹è½½å°è¯´å°é¢ï¼ˆå¦‚æœå­˜åœ¨ï¼‰
scp -r ${SERVER_USER}@${SERVER_IP}:${SERVER_PATH}/uploads/novel-covers server/uploads/ 2>$null
```

---

## ğŸš€ ä¸Šä¼ ä»£ç åˆ°æœåŠ¡å™¨

```bash
# 1. æœ¬åœ°æäº¤ä»£ç 
git add .
git commit -m "æ›´æ–°è¯´æ˜"
git push origin main

# 2. æœåŠ¡å™¨æ‹‰å–ä»£ç 
ssh admin@39.97.243.8
cd /home/admin/couple-media-website
git pull origin main

# 3. å®‰è£…ä¾èµ–å’Œæ„å»º
cd server && npm install --production
cd ../client && npm install && npm run build
sudo chown -R www:www /home/admin/couple-media-website/client/dist

# 4. é‡å¯æœåŠ¡
cd /home/admin/couple-media-website
pm2 restart ecosystem.config.js
```

---

## ğŸ”§ å¸¸ç”¨æœåŠ¡å™¨å‘½ä»¤

```bash
# SSH è¿æ¥æœåŠ¡å™¨
ssh admin@39.97.243.8

# æŸ¥çœ‹æœåŠ¡çŠ¶æ€
pm2 list
pm2 logs couple-media-server

# é‡å¯æœåŠ¡
pm2 restart ecosystem.config.js

# æŸ¥çœ‹æ–‡ä»¶æƒé™
ls -la /home/admin/couple-media-website/server/uploads/

# è®¾ç½®æ–‡ä»¶æƒé™
sudo chmod -R 755 /home/admin/couple-media-website/server/uploads/
```

---

## ğŸ’¡ æç¤º

- é…ç½® SSH å¯†é’¥åï¼Œæ‰€æœ‰ `scp` å’Œ `ssh` å‘½ä»¤éƒ½ä¸éœ€è¦è¾“å…¥å¯†ç 
- å¯ä»¥å°†å¸¸ç”¨å‘½ä»¤ä¿å­˜ä¸º PowerShell å‡½æ•°æˆ–åˆ«åï¼Œæ–¹ä¾¿å¿«é€Ÿæ‰§è¡Œ
- å»ºè®®å®šæœŸä»æœåŠ¡å™¨åŒæ­¥æ•°æ®åˆ°æœ¬åœ°ä½œä¸ºå¤‡ä»½

